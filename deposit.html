
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Äî –ü-–ë–∞–Ω–∫</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom, #0a0a2a, #000000);
      color: white;
    }

    header {
      background: black;
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    header h1 {
      margin: 0;
      color: #ff5fa2;
    }

    nav {
      display: flex;
      gap: 10px;
      justify-content: center;
      background: #111;
      padding: 10px;
    }

    nav button {
      background: #222;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 10px;
      cursor: pointer;
    }

    nav button.active {
      background: #ff5fa2;
    }

    .tab {
      display: none;
      padding: 30px;
    }

    .tab.active {
      display: block;
    }

    input, select, button {
      padding: 10px;
      margin-top: 10px;
      margin-bottom: 15px;
      width: 100%;
      border-radius: 8px;
      border: none;
      font-size: 14px;
    }

    button.action {
      background: linear-gradient(to right, #ff5fa2, #ff80c1);
      color: white;
      font-weight: bold;
    }

    .user-card {
      background: rgba(255,255,255,0.05);
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <header>
    <h1>–ü-–ë–∞–Ω–∫ | –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
  </header>

  <nav>
    <button onclick="switchTab('users')" class="active">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
    <button onclick="switchTab('balance')">üí∞ –ë–∞–ª–∞–Ω—Å</button>
    <button onclick="switchTab('admins')">üëë –ê–¥–º–∏–Ω—ã</button>
    <button onclick="switchTab('visits')">üìÖ –í–∏–∑–∏—Ç—ã</button>
  </nav>

  <div id="users" class="tab active">
    <h2>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h2>
    <div id="userList"></div>
  </div>

  <div id="balance" class="tab">
    <h2>–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å –∏–≥—Ä–æ–∫–∞</h2>
    <input id="nick" placeholder="–ù–∏–∫ –∏–≥—Ä–æ–∫–∞" />
    <select id="currency">
      <option value="d">–ê–ª–º–∞–∑—ã</option>
      <option value="do">–ê–ª–º–∞–∑–Ω–∞—è —Ä—É–¥–∞</option>
      <option value="db">–ê–ª–º–∞–∑–Ω—ã–µ –±–ª–æ–∫–∏</option>
      <option value="ng">–ù–µ–∑–µ—Ä–∏—Ç–æ–≤—ã–µ –æ–±–ª–æ–º–∫–∏</option>
      <option value="nf">–ù–µ–∑–µ—Ä–∏—Ç–æ–≤—ã–µ —Å–ª–∏—Ç–∫–∏</option>
    </select>
    <input id="amount" type="number" placeholder="–°–∫–æ–ª—å–∫–æ?" />
    <button class="action" onclick="addBalance()">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
  </div>

  <div id="admins" class="tab">
    <h2>–ê–¥–º–∏–Ω—ã</h2>
    <input id="newAdmin" placeholder="–ù–∏–∫ –Ω–æ–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞" />
    <button class="action" onclick="addAdmin()">–î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∞</button>
    <div id="adminList"></div>
  </div>

  <div id="visits" class="tab">
    <h2>–ó–∞–ø–∏—Å–∏ –Ω–∞ –≤–∏–∑–∏—Ç</h2>
    <div id="visitList"></div>
  </div>

  <script>
    const users = JSON.parse(localStorage.getItem("pbank_users")) || [];
    let admins = JSON.parse(localStorage.getItem("pbank_admins")) || ["B1gTorch", "FlouD_"];
    let visits = JSON.parse(localStorage.getItem("pbank_visits")) || [];

    function switchTab(id) {
      document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
      document.querySelectorAll("nav button").forEach(b => b.classList.remove("active"));
      document.getElementById(id).classList.add("active");
      event.target.classList.add("active");
      if (id === "users") renderUsers();
      if (id === "admins") renderAdmins();
      if (id === "visits") renderVisits();
    }

    function renderUsers() {
      const div = document.getElementById("userList");
      div.innerHTML = users.map(u => {
        return `<div class="user-card">
          <b>${u.nickname}</b> (${u.email})<br>
          üíé d:${u.d||0} | do:${u.do||0} | db:${u.db||0} | ng:${u.ng||0} | nf:${u.nf||0}
          <br><button onclick="removeUser('${u.email}')">–£–¥–∞–ª–∏—Ç—å</button>
        </div>`;
      }).join("");
    }

    function renderAdmins() {
      document.getElementById("adminList").innerHTML =
        "<b>–¢–µ–∫—É—â–∏–µ –∞–¥–º–∏–Ω—ã:</b><br>" + admins.map(a => "‚Ä¢ " + a).join("<br>");
    }

    function renderVisits() {
      document.getElementById("visitList").innerHTML =
        visits.length === 0 ? "–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π." :
        visits.map(v => `üïí ${v.date} ‚Äî <b>${v.nick}</b> (${v.comment || ""})`).join("<br>");
    }

    function removeUser(email) {
      const idx = users.findIndex(u => u.email === email);
      if (idx !== -1) {
        users.splice(idx, 1);
        localStorage.setItem("pbank_users", JSON.stringify(users));
        renderUsers();
      }
    }

    function addBalance() {
      const nick = document.getElementById("nick").value.trim();
      const currency = document.getElementById("currency").value;
      const amount = parseInt(document.getElementById("amount").value);
      const u = users.find(u => u.nickname === nick);
      if (!u || !currency || !amount || amount <= 0) return alert("–û—à–∏–±–∫–∞ –≤–≤–æ–¥–∞");
      u[currency] = (u[currency] || 0) + amount;
      localStorage.setItem("pbank_users", JSON.stringify(users));
      alert("–ë–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–ª—ë–Ω");
    }

    function addAdmin() {
      const nick = document.getElementById("newAdmin").value.trim();
      if (!nick || admins.includes(nick)) return alert("–û—à–∏–±–∫–∞ –∏–ª–∏ —É–∂–µ –∞–¥–º–∏–Ω");
      admins.push(nick);
      localStorage.setItem("pbank_admins", JSON.stringify(admins));
      renderAdmins();
      alert("–ê–¥–º–∏–Ω –¥–æ–±–∞–≤–ª–µ–Ω");
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    renderUsers();
  </script>
</body>
</html>
