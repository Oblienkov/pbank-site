
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Äî –ü-–ë–∞–Ω–∫</title>
  <style>
    body {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom, #0a0a2a, #000000);
      color: white;
    }

    header {
      background: black;
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    header h1 {
      margin: 0;
      color: #ff5fa2;
    }

    main {
      max-width: 600px;
      margin: 40px auto;
      padding: 20px;
      background-color: rgba(255,255,255,0.05);
      border-radius: 16px;
      box-shadow: 0 0 20px rgba(0,0,0,0.4);
    }

    h2 {
      color: #ffa8d8;
      text-align: center;
    }

    input, select, button {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      margin-bottom: 15px;
      font-size: 16px;
      border: none;
    }

    button {
      background: linear-gradient(to right, #ff5fa2, #ff80c1);
      color: white;
      font-weight: bold;
      cursor: pointer;
    }

    #adminPanel {
      display: none;
      margin-top: 40px;
    }

    .user-card {
      background: rgba(255,255,255,0.08);
      padding: 10px;
      border-radius: 10px;
      margin-bottom: 10px;
    }

    .icon {
      width: 20px;
      vertical-align: middle;
      margin-right: 6px;
    }

    footer {
      text-align: center;
      padding: 20px;
      background-color: rgba(0,0,0,0.8);
    }
  </style>
</head>
<body>
  <header>
    <h1><a href="index.html" style="color:#ff5fa2;text-decoration:none;">–ü-–ë–∞–Ω–∫</a></h1>
  </header>

  <main>
    <h2>–ó–∞–ø–∏—Å—å –Ω–∞ –≤–∏–∑–∏—Ç</h2>
    
<div id="playerInfo" style="margin-bottom: 30px;">
  <h2 style="text-align:center;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span id='playerName'></span>!</h2>
  <p style="text-align:center;">–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –≤–∏–∑–∏—Ç –≤ –ü-–ë–∞–Ω–∫ –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞.</p>
  <div style="text-align:center; margin-top: 20px;">
    <h3>–í–∞—à –±–∞–ª–∞–Ω—Å:</h3>
    <div id="playerBalance" style="font-size: 15px; line-height: 1.6;"></div>
  </div>
</div>

<form onsubmit="return saveVisit()">
      <input type="datetime-local" id="visitDate" required />
      <input type="text" id="comment" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" />
      <button type="submit">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</button>
    </form>

    <div id="adminPanel">
      <h2>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
      <input id="targetNick" placeholder="–ù–∏–∫ –∏–≥—Ä–æ–∫–∞">
      <select id="currency">
        <option value="d">üíé –ê–ª–º–∞–∑—ã</option>
        <option value="do">‚õèÔ∏è –ê–ª–º–∞–∑–Ω–∞—è —Ä—É–¥–∞</option>
        <option value="db">üî∑ –ë–ª–æ–∫–∏ –∞–ª–º–∞–∑–æ–≤</option>
        <option value="ng">üî• –û–±–ª–æ–º–∫–∏ –Ω–µ–∑–µ—Ä–∏—Ç–∞</option>
        <option value="nf">‚öîÔ∏è –°–ª–∏—Ç–∫–∏ –Ω–µ–∑–µ—Ä–∏—Ç–∞</option>
      </select>
      <input id="amount" type="number" placeholder="–°–∫–æ–ª—å–∫–æ?" />
      <button onclick="addBalance()">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>

      <h3 style="margin-top:30px;">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
      <div id="userList"></div>

      <h3 style="margin-top:30px;">–ó–∞–ø–∏—Å–∏ –Ω–∞ –≤–∏–∑–∏—Ç</h3>
      <div id="visitList"></div>
    </div>
  </main>
  <footer style='margin-top: auto;'>¬© 2025 –ü-–ë–∞–Ω–∫</footer>

  <script>
    const currentUser = JSON.parse(localStorage.getItem("pbank_currentUser"));
    const users = JSON.parse(localStorage.getItem("pbank_users")) || [];
    const visits = JSON.parse(localStorage.getItem("pbank_visits")) || [];
    const admins = JSON.parse(localStorage.getItem("pbank_admins")) || ["B1gTorch", "FlouD_"];

    if (!currentUser || !currentUser.nickname) {
      alert("–í—ã –Ω–µ –≤–æ—à–ª–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç");
      window.location.href = "index.html";
    }

    if (admins.includes(currentUser.nickname)) {
      document.getElementById("adminPanel").style.display = "block";
      renderUsers();
    function showPlayerInfo() {
      if (!admins.includes(currentUser.nickname)) {
        document.getElementById("playerName").textContent = currentUser.nickname;
        let html = "";
        ["d","do","db","ng","nf"].forEach(k => {
          const value = currentUser[k] || 0;
          html += "<img src='" + k + ".png' class='icon'> " + value + " ";
        });
        document.getElementById("playerBalance").innerHTML = html;
      }
    }

    showPlayerInfo();

      renderVisits();
    }

    function saveVisit() {
      const date = document.getElementById("visitDate").value;
      const comment = document.getElementById("comment").value;
      if (!date) return alert("–£–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—É");
      visits.push({ nick: currentUser.nickname, date, comment });
      localStorage.setItem("pbank_visits", JSON.stringify(visits));
      alert("–í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–ø–∏—Å–∞–ª–∏—Å—å!");
      return false;
    }

    function addBalance() {
      const nick = document.getElementById("targetNick").value.trim();
      const currency = document.getElementById("currency").value;
      const amount = parseInt(document.getElementById("amount").value);
      const user = users.find(u => u.nickname === nick);
      if (!user) return alert("–ò–≥—Ä–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω");
      user[currency] = (user[currency] || 0) + amount;
      localStorage.setItem("pbank_users", JSON.stringify(users));
      alert("–ë–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–ª—ë–Ω!");
      renderUsers();
    function showPlayerInfo() {
      if (!admins.includes(currentUser.nickname)) {
        document.getElementById("playerName").textContent = currentUser.nickname;
        let html = "";
        ["d","do","db","ng","nf"].forEach(k => {
          const value = currentUser[k] || 0;
          html += "<img src='" + k + ".png' class='icon'> " + value + " ";
        });
        document.getElementById("playerBalance").innerHTML = html;
      }
    }

    showPlayerInfo();

    }

    function renderUsers() {
      const div = document.getElementById("userList");
      div.innerHTML = users.map(u => {
        return "<div class='user-card'><b>" + u.nickname + "</b> (" + u.email + ")<br>" +
          "<img src='d.png' class='icon'> " + (u.d||0) +
          " <img src='do.png' class='icon'> " + (u.do||0) +
          " <img src='db.png' class='icon'> " + (u.db||0) +
          " <img src='ng.png' class='icon'> " + (u.ng||0) +
          " <img src='nf.png' class='icon'> " + (u.nf||0) +
          "</div>";
      }).join("");
    }

    function renderVisits() {
      const div = document.getElementById("visitList");
      div.innerHTML = visits.map(v =>
        "üïí " + v.date + " ‚Äî <b>" + v.nick + "</b> " + (v.comment ? "(" + v.comment + ")" : "")
      ).join("<br>");
    }
  </script>
</body>
</html>
