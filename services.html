
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–£—Å–ª—É–≥–∏ ‚Äî –ü-–ë–∞–Ω–∫</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #0f0c29, #302b63, #24243e);
      color: white;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header {
      background: #111;
      padding: 20px 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.5);
    }
    header h1 a {
      color: #ff5fa2;
      text-decoration: none;
    }
    main {
      flex: 1;
      max-width: 1000px;
      margin: 40px auto;
      padding: 20px;
    }
    h2 { text-align: center; margin-bottom: 30px; }
    .services-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }
    .service {
      background: rgba(255,255,255,0.07);
      border-radius: 16px;
      padding: 20px;
      text-align: center;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      cursor: pointer;
      transition: transform 0.3s, background 0.3s;
    }
    .service:hover {
      background: rgba(255,255,255,0.15);
      transform: translateY(-5px);
    }
    .service i {
      font-size: 28px;
      margin-bottom: 10px;
      color: #ffa8d8;
    }
    .service h3 {
      margin: 0;
      font-size: 18px;
    }
    footer {
      background: rgba(0,0,0,0.8);
      padding: 20px;
      text-align: center;
    }
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.9);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .modal-content {
      background: #1a1a2d;
      padding: 30px;
      border-radius: 20px;
      width: 90%;
      max-width: 420px;
      animation: fadeIn 0.3s ease;
    }
    .modal-content input,
    .modal-content select,
    .modal-content button {
      width: 100%;
      padding: 12px;
      margin-bottom: 12px;
      border: none;
      border-radius: 10px;
      font-size: 15px;
    }
    .modal-content button {
      background: linear-gradient(to right, #ff5fa2, #ff80c1);
      color: white;
      font-weight: bold;
      cursor: pointer;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }
    .history-log {
      max-height: 200px;
      overflow-y: auto;
      background: rgba(255,255,255,0.05);
      padding: 10px;
      border-radius: 10px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <header>
    <h1><a href="index.html">–ü-–ë–∞–Ω–∫</a></h1>
  </header>

  <main>
    <h2>–£—Å–ª—É–≥–∏ –±–∞–Ω–∫–∞</h2>
    <div class="services-grid">
      <div class="service" onclick="openModal('modalTopup')"><i class="fas fa-plus-circle"></i><h3>–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</h3></div>
      <div class="service" onclick="openModal('modalTransfer')"><i class="fas fa-exchange-alt"></i><h3>–ü–µ—Ä–µ–≤–æ–¥</h3></div>
      <div class="service" onclick="openModal('modalStore')"><i class="fas fa-box"></i><h3>–•—Ä–∞–Ω–µ–Ω–∏–µ</h3></div>
      <div class="service" onclick="openModal('modalBonus')"><i class="fas fa-gift"></i><h3>–ë–æ–Ω—É—Å—ã</h3></div>
      <div class="service" onclick="openModal('modalLoan')"><i class="fas fa-credit-card"></i><h3>–ö—Ä–µ–¥–∏—Ç</h3></div>
      <div class="service" onclick="openModal('modalExchange')"><i class="fas fa-arrows-rotate"></i><h3>–û–±–º–µ–Ω</h3></div>
      <div class="service" onclick="openModal('modalHistory')"><i class="fas fa-file-alt"></i><h3>–ò—Å—Ç–æ—Ä–∏—è</h3></div>
      <div class="service" onclick="openModal('modalNotify')"><i class="fas fa-bell"></i><h3>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3></div>
    </div>
  </main>

  <footer>¬© 2025 –ü-–ë–∞–Ω–∫</footer>

<!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
<div class="modal" id="modalTopup">
  <div class="modal-content">
    <h2>–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</h2>
    <p>–ó–∞–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –≤–∏–∑–∏—Ç —á–µ—Ä–µ–∑ <a href="deposit.html" style="color:#ffa8d8;">—Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É</a>.</p>
    <button onclick="closeModal('modalTopup')">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<div class="modal" id="modalTransfer">
  <div class="modal-content">
    <h2>–ü–µ—Ä–µ–≤–æ–¥</h2>
    <input id="toUser" placeholder="–ö–æ–º—É (–Ω–∏–∫)">
    <select id="currency">
<option value="ng">üî• –û–±–ª–æ–º–æ–∫</option>
<option value="nf">‚öîÔ∏è –°–ª–∏—Ç–æ–∫</option>
      <option value="d">üíé –ê–ª–º–∞–∑—ã</option>
      <option value="do">‚õèÔ∏è –†—É–¥–∞</option>
      <option value="db">üî∑ –ë–ª–æ–∫</option>
    </select>
    <input id="amount" type="number" placeholder="–°–∫–æ–ª—å–∫–æ">
    <button onclick="sendTransfer()">–ü–µ—Ä–µ–≤–µ—Å—Ç–∏</button>
    <button onclick="closeModal('modalTransfer')">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<div class="modal" id="modalExchange">
  <div class="modal-content">
    <h2>–û–±–º–µ–Ω –≤–∞–ª—é—Ç—ã</h2>
    <select id="fromCurrency">
<option value="ng">üî• –û–±–ª–æ–º–æ–∫</option>
<option value="nf">‚öîÔ∏è –°–ª–∏—Ç–æ–∫</option>
      <option value="d">üíé –ê–ª–º–∞–∑—ã</option>
      <option value="db">üî∑ –ë–ª–æ–∫–∏</option>
    </select>
    <select id="toCurrency">
<option value="ng">üî• –û–±–ª–æ–º–æ–∫</option>
<option value="nf">‚öîÔ∏è –°–ª–∏—Ç–æ–∫</option>
      <option value="db">üî∑ –ë–ª–æ–∫–∏</option>
      <option value="d">üíé –ê–ª–º–∞–∑—ã</option>
    </select>
    <input type="number" id="exchangeAmount" placeholder="–°–∫–æ–ª—å–∫–æ">
    <button onclick="exchange()">–û–±–º–µ–Ω—è—Ç—å</button>
    <button onclick="closeModal('modalExchange')">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<div class="modal" id="modalHistory">
  <div class="modal-content">
    <h2>–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h2>
    <div class="history-log" id="historyLog">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    <button onclick="closeModal('modalHistory')">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<div class="modal" id="modalStore">
  <div class="modal-content"><h2>–•—Ä–∞–Ω–µ–Ω–∏–µ</h2><p>–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ LocalStorage –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –≤–∞–º.</p>
    <button onclick="closeModal('modalStore')">–ó–∞–∫—Ä—ã—Ç—å</button></div></div>

<div class="modal" id="modalLoan">
  <div class="modal-content"><h2>–ö—Ä–µ–¥–∏—Ç</h2><p>–ü–æ–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É –±–∞–Ω–∫–∞.</p>
    <button onclick="closeModal('modalLoan')">–ó–∞–∫—Ä—ã—Ç—å</button></div></div>

<div class="modal" id="modalBonus">
  <div class="modal-content"><h2>–ë–æ–Ω—É—Å—ã</h2><p>–ë–æ–Ω—É—Å—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∑–∞ –≤–∏–∑–∏—Ç—ã –∏ –ø–µ—Ä–µ–≤–æ–¥—ã!</p>
    <button onclick="closeModal('modalBonus')">–ó–∞–∫—Ä—ã—Ç—å</button></div></div>

<div class="modal" id="modalNotify">
  <div class="modal-content"><h2>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h2><p>–ü–æ–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —Å–∞–π—Ç–∞.</p>
    <button onclick="closeModal('modalNotify')">–ó–∞–∫—Ä—ã—Ç—å</button></div></div>

<script>
function openModal(id) {
  if (id === 'modalHistory') renderHistory();
  document.getElementById(id).style.display = 'flex';
}
function closeModal(id) {
  document.getElementById(id).style.display = 'none';
}

function sendTransfer() {
  const to = document.getElementById("toUser").value.trim();
  const currency = document.getElementById("currency").value;
  const amount = parseInt(document.getElementById("amount").value);
  if (!to || !amount || amount <= 0) return alert("–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ");

  let users = JSON.parse(localStorage.getItem("pbank_users")) || [];
  let current = JSON.parse(localStorage.getItem("pbank_currentUser"));
  let sender = users.find(u => u.email === current.email);
  let receiver = users.find(u => u.nickname === to);
  if (!receiver) return alert("–ò–≥—Ä–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω");
  if ((sender[currency] || 0) < amount) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤");

  sender[currency] -= amount;
  receiver[currency] = (receiver[currency] || 0) + amount;
  localStorage.setItem("pbank_users", JSON.stringify(users));
  logHistory(`–ü–µ—Ä–µ–≤–æ–¥ ${amount} ${currency} –∏–≥—Ä–æ–∫—É ${to}`);
  alert("–£—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ!");
  closeModal("modalTransfer");
}

function exchange() {
  const from = document.getElementById("fromCurrency").value;
  const to = document.getElementById("toCurrency").value;
  const amt = parseInt(document.getElementById("exchangeAmount").value);
  if (from === to || !amt || amt <= 0) return alert("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ–±–º–µ–Ω");

  let users = JSON.parse(localStorage.getItem("pbank_users")) || [];
  let current = JSON.parse(localStorage.getItem("pbank_currentUser"));
  let user = users.find(u => u.email === current.email);
  let rates = { "d_db": 9, "db_d": 1/9, "d_nf": 24, "nf_d": 1/24, "d_ng": 6, "ng_d": 1/6 };

  let key = from + "_" + to;
  if (!rates[key]) return alert("–û–±–º–µ–Ω –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω");

  let cost = from === "d" ? amt : amt * rates[key];
  if ((user[from] || 0) < cost) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤");

  user[from] -= cost;
  user[to] = (user[to] || 0) + amt;
  localStorage.setItem("pbank_users", JSON.stringify(users));
  logHistory(`–û–±–º–µ–Ω ${cost.toFixed(2)} ${from} –Ω–∞ ${amt} ${to}`);
  alert("–û–±–º–µ–Ω –∑–∞–≤–µ—Ä—à—ë–Ω!");
  closeModal("modalExchange");
}

function logHistory(entry) {
  const history = JSON.parse(localStorage.getItem("pbank_history")) || [];
  history.unshift({ time: new Date().toLocaleString(), text: entry });
  localStorage.setItem("pbank_history", JSON.stringify(history));
}

function renderHistory() {
  const history = JSON.parse(localStorage.getItem("pbank_history")) || [];
  document.getElementById("historyLog").innerHTML = history.length === 0 ?
    "–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π." :
    history.map(h => `<div>üìå <b>${h.time}</b>: ${h.text}</div>`).join("");
}
</script>
</body>
</html>
